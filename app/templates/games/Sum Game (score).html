<!-- templates/games/sum_game_score.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Sum Game</title>
</head>
<body>
    <h1>Sum Game</h1>
    <p>Score: <span id="userScore"></span></p>
    <div id="gameContainer"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var num1 = Math.floor(Math.random() * 10);
            var num2 = Math.floor(Math.random() * 10);
            var gameContainer = document.getElementById('gameContainer');
            var question = document.createElement('p');
            var input = document.createElement('input');
            var button = document.createElement('button');

            question.textContent = `What is ${num1} + ${num2}?`;
            input.type = 'number';
            input.required = true;
            button.textContent = 'Submit';

            gameContainer.appendChild(question);
            gameContainer.appendChild(input);
            gameContainer.appendChild(button);

            button.addEventListener('click', function() {
                var answer = parseInt(input.value, 10);
                var correctAnswer = num1 + num2;

                if (answer === correctAnswer) {
                    alert('Correct!');
                    addScore({{ campaign.id }}, 10);
                } else {
                    alert('Incorrect. Try again.');
                    // refresh
                }
            });
        });
    </script>
    <script src="http://ict.revisto.lol/static/js/widget.js" data-context="game"></script>
    <script>
        // Call getUserScore after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            var campaignId = {{ campaign.id }};
            getUserScore(campaignId);
        });
    </script>
</body>
</html>